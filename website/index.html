<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Garbanzo</title>
    <meta
      name="description"
      content="Garbanzo is an AI chat operations platform with multi-provider model routing, workflow automations, and integration-ready commands."
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="container">
      <section class="hero">
        <p class="eyebrow">AI chat operations platform</p>
        <h1 id="title">Garbanzo</h1>
        <p id="tagline" class="tagline"></p>
        <p id="description" class="description"></p>
        <div class="actions">
          <a id="ctaPrimary" class="button button-primary" href="#" target="_blank" rel="noreferrer">Start Building</a>
          <a id="ctaDemo" class="button button-demo" href="https://demo.garbanzobot.com" target="_blank" rel="noreferrer">Try Live Demo</a>
          <a id="ctaSecondary" class="button button-secondary" href="#" target="_blank" rel="noreferrer">Support the AI roadmap</a>
        </div>
      </section>

      <section class="grid" aria-label="Core strengths">
        <article class="card">
          <h3>Provider orchestration</h3>
          <p>Route prompts across Claude, OpenAI, Gemini, Bedrock, and optional local Ollama with configurable failover and model selection.</p>
        </article>
        <article class="card">
          <h3>Session memory</h3>
          <p>Conversations are sessionized, summarized, and embedded for semantic retrieval. The bot remembers what was discussed across sessions, not just the last few messages.</p>
        </article>
        <article class="card">
          <h3>AI capabilities and automations</h3>
          <p>Ship useful workflows out of the box: summaries, introductions, event planning, moderation signals, and owner digests.</p>
        </article>
        <article class="card">
          <h3>Integration-ready commands</h3>
          <p>Connect live data workflows for weather, transit, venues, news, books, and game utilities without custom glue code.</p>
        </article>
      </section>

      <section class="demo-note" aria-label="Live demo">
        <h2>Live demo</h2>
        <p>
          You can test Garbanzo right now at
          <a href="https://demo.garbanzobot.com" target="_blank" rel="noreferrer">demo.garbanzobot.com</a>
          without installing anything.
        </p>
      </section>

      <section class="platforms" aria-label="Platform posture">
        <h2>Platform posture</h2>
        <div class="platform-grid">
          <article class="platform-card">
            <h3>WhatsApp</h3>
            <p><strong>Status:</strong> Production runtime</p>
            <p>Best for community and self-hosted group operations.</p>
          </article>
          <article class="platform-card">
            <h3>Slack</h3>
            <p><strong>Status:</strong> Official API runtime</p>
            <p>Best for stable channel operations with predictable webhook behavior.</p>
          </article>
          <article class="platform-card">
            <h3>Discord</h3>
            <p><strong>Status:</strong> Official API runtime</p>
            <p>Supports production bot interactions with strong server/channel tooling.</p>
          </article>
          <article class="platform-card">
            <h3>Teams</h3>
            <p><strong>Status:</strong> Adapter target</p>
            <p>Planned through the shared adapter architecture.</p>
          </article>
        </div>
      </section>

      <section class="release-policy" aria-label="AI provider and integration stack">
        <h2>AI provider and integration stack</h2>
        <p>
          Run one chat runtime with multiple AI backends, practical integrations, and operational guardrails designed for active communities.
        </p>
        <ul>
          <li>Providers: Claude, OpenAI, Gemini, Bedrock, OpenRouter, and optional local Ollama.</li>
          <li>Routing: configurable failover order with per-provider model overrides.</li>
          <li>Memory: session summarization with vector embeddings (deterministic or OpenAI) for long-horizon recall.</li>
          <li>Storage: SQLite (default) or Postgres with pgvector for semantic session retrieval.</li>
          <li>Integrations: weather, transit, venues, news, books, and D&amp;D lookup workflows.</li>
          <li>Guardrails: moderation signals, context controls, and member-safe release messaging.</li>
        </ul>
      </section>

      <section class="support" id="support">
        <h2>Back the AI roadmap</h2>
        <p id="supportBlurb">Support keeps maintenance, releases, and support response sustainable.</p>
        <ul id="supportLinks"></ul>

        <div id="tierGrid" class="tier-grid" aria-label="Support tiers"></div>
      </section>

      <section class="trust" aria-label="Business and trust details">
        <h2>Business and trust details</h2>
        <p>
          Garbanzo Bean is operated as an independent software project focused on reliable AI chat operations for communities.
        </p>
        <ul class="trust-links">
          <li>Contact: <a id="contactEmailLink" href="mailto:jjhickman@pm.me">jjhickman@pm.me</a></li>
          <li><a id="privacyPolicyLink" href="./privacy.html">Privacy Policy</a></li>
          <li><a id="termsLink" href="./terms.html">Terms of Service</a></li>
        </ul>
      </section>

      <footer>
        Built for communities and small teams. Multi-provider AI routing. Session memory with vector retrieval. Docker-first deployment. Apache-2.0 licensed.
      </footer>
    </main>

    <script>
      async function loadConfig() {
        const response = await fetch('./site-config.json', { cache: 'no-store' });
        if (!response.ok) throw new Error('Failed to load site config');
        return response.json();
      }

      function setText(id, value) {
        const el = document.getElementById(id);
        if (el && typeof value === 'string' && value.trim()) el.textContent = value;
      }

      function setLink(id, href, label) {
        const el = document.getElementById(id);
        if (!el) return;
        if (typeof label === 'string' && label.trim()) el.textContent = label;
        if (typeof href === 'string' && href.trim()) {
          el.href = href;
        } else {
          el.style.display = 'none';
        }
      }

      function setHref(id, href) {
        const el = document.getElementById(id);
        if (!el) return;
        if (typeof href === 'string' && href.trim()) {
          el.href = href;
        }
      }

      function addSupportLink(list, label, href) {
        if (!href || !href.trim()) return;
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = href;
        a.target = '_blank';
        a.rel = 'noreferrer';
        a.textContent = label;
        li.appendChild(a);
        list.appendChild(li);
      }

      function renderSupportTiers(tiers) {
        const container = document.getElementById('tierGrid');
        if (!container || !Array.isArray(tiers) || tiers.length === 0) return;

        for (const tier of tiers) {
          if (!tier || typeof tier !== 'object') continue;

          const article = document.createElement('article');
          article.className = 'tier-card';

          const name = document.createElement('h3');
          name.textContent = typeof tier.name === 'string' ? tier.name : 'Support Tier';

          const summary = document.createElement('p');
          summary.textContent = typeof tier.summary === 'string' ? tier.summary : '';

          const fit = document.createElement('p');
          fit.className = 'tier-fit';
          fit.textContent = typeof tier.fit === 'string' ? tier.fit : '';

          article.appendChild(name);
          if (summary.textContent) article.appendChild(summary);
          if (fit.textContent) article.appendChild(fit);

          container.appendChild(article);
        }
      }

      loadConfig()
        .then((cfg) => {
          setText('title', cfg.title);
          setText('tagline', cfg.tagline);
          setText('description', cfg.description);
          setText('supportBlurb', cfg.supportBlurb);

          setLink('ctaPrimary', cfg.ctaPrimaryUrl || cfg.githubRepoUrl, cfg.ctaPrimaryLabel || 'Start Building');
          setLink('ctaDemo', cfg.demoUrl || 'https://demo.garbanzobot.com', cfg.demoLabel || 'Try Live Demo');
          setLink('ctaSecondary', cfg.ctaSecondaryUrl || cfg.patreonUrl || cfg.githubSponsorsUrl, cfg.ctaSecondaryLabel || 'Support the AI roadmap');

          if (cfg.contactEmail) {
            const contact = document.getElementById('contactEmailLink');
            if (contact) {
              contact.href = `mailto:${cfg.contactEmail}`;
              contact.textContent = cfg.contactEmail;
            }
          }

          setHref('privacyPolicyLink', cfg.privacyPolicyUrl || './privacy.html');
          setHref('termsLink', cfg.termsUrl || './terms.html');

          const list = document.getElementById('supportLinks');
          addSupportLink(list, 'GitHub Sponsors', cfg.githubSponsorsUrl);
          addSupportLink(list, 'Patreon', cfg.patreonUrl);
          addSupportLink(list, 'Ko-fi', cfg.kofiUrl);

          if (!list.children.length) {
            const li = document.createElement('li');
            li.textContent = 'Support links are not configured yet.';
            list.appendChild(li);
          }

          renderSupportTiers(cfg.supportTiers);
        })
        .catch((err) => {
          const list = document.getElementById('supportLinks');
          const li = document.createElement('li');
          li.textContent = `Site config error: ${err instanceof Error ? err.message : String(err)}`;
          list.appendChild(li);
        });
    </script>
  </body>
</html>
