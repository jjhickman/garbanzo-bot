{
  "$schema": "https://opencode.ai/config.json",

  "model": "anthropic/claude-sonnet-4-5",
  "small_model": "anthropic/claude-haiku-4-5",

  "provider": {
    "anthropic": {
      "options": {
        "timeout": 300000
      }
    },
    "openai": {
      "options": {
        "timeout": 300000
      },
      "models": {
        "gpt-5.3-codex": {
          "name": "GPT-5.3 Codex (Fallback)"
        }
      }
    },
    "openrouter": {
      "options": {
        "baseURL": "https://openrouter.ai/api/v1"
      },
      "whitelist": [
        "anthropic/claude-sonnet-4-5",
        "anthropic/claude-haiku-4-5",
        "anthropic/claude-opus-4-6",
        "google/gemini-2.5-flash",
        "deepseek/deepseek-chat-v3-0324"
      ]
    },
    "ollama-local": {
      "options": {
        "baseURL": "http://127.0.0.1:11434/v1"
      },
      "models": {
        "qwen3:8b": {},
        "qwen3:30b-a3b": {}
      }
    }
  },

  "instructions": ["AGENTS.md"],

  "permission": {
    "bash": "ask",
    "edit": "allow",
    "mcp": "ask"
  },

  "agent": {
    "build": {
      "model": "anthropic/claude-sonnet-4-5",
      "steps": 25,
      "temperature": 0,
      "permission": {
        "bash": "ask",
        "edit": "allow",
        "mcp": "ask"
      }
    },
    "plan": {
      "model": "anthropic/claude-sonnet-4-5",
      "mode": "primary",
      "permission": {
        "edit": "deny",
        "bash": "ask"
      }
    },
    "build-openai": {
      "description": "Fallback build agent using OpenAI GPT-5.3 Codex",
      "model": "openai/gpt-5.3-codex",
      "steps": 25,
      "temperature": 0,
      "permission": {
        "bash": "ask",
        "edit": "allow",
        "mcp": "ask"
      }
    },
    "plan-openai": {
      "description": "Fallback planning agent using OpenAI GPT-5.3 Codex",
      "model": "openai/gpt-5.3-codex",
      "mode": "primary",
      "permission": {
        "edit": "deny",
        "bash": "ask"
      }
    }
  },

  "compaction": {
    "auto": true,
    "prune": true,
    "reserved": 8192
  },

  "mcp": {
    "sqlite": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-sqlite", "<PROJECT_DIR>/data/garbanzo.db"]
    },
    "brave-search": {
      "command": "npx",
      "args": ["-y", "@brave/brave-search-mcp-server"],
      "env": {
        "BRAVE_API_KEY": "<your-brave-search-api-key>"
      }
    },
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "<PROJECT_DIR>"]
    },
    "docker": {
      "command": "npx",
      "args": ["-y", "mcp-server-docker"]
    },
    "puppeteer": {
      "command": "npx",
      "args": ["-y", "@hisma/server-puppeteer"]
    },
    "github": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-github"],
      "env": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "<your-github-pat>"
      }
    }
  }
}
